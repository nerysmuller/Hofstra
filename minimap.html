<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb18030">
<title>SCO in Rome Research Minimap</title>
<meta name="description" content="A student-led online excursion by Hofstra University's communication students exploring the impact of COVID-19 in Italy.">
<meta name="keywords" content="Matt Applegate, Nerys Muller, Stephan Hatchett, Justyn Moore, Nicole Clarity, Randal Hillebrand, Hofstra, Hofstra University, SCO in Rome, Hofstra in Rome">
<meta name='viewport' content='initial-scale=1,maximum-scale=1' />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script src='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.css' rel='stylesheet' />
<style>

body, html {
  margin:0;
  padding:0;
  height: 100%;
  overflow: hidden;
}

<!--THIS DISABLES THE SCROLL FUNCTION -->

html {
  overflow-y: scroll !important;
}

<!--END SCROLLBAR BLOCK -->

<!--CSS FOR MAP -->

#map-container {
            height: 70%;
            padding-bottom: 0px;
            margin: 0px;
}

#map {
        display: block;
        height: 80%;
        width: 80%;
        margin-left: auto;
        margin-right: auto;
}

.popup {
  text-align:center;
}

.popup .slideshow .image{
  display:none;
}

.popup .slideshow .image.active {
  display:block;
}

.popup .slideshow img {
  width:100%;
}

.popup .slideshow .caption {
  background:#eee;
  padding:10px;
}

.popup .cycle {
  padding:10px 0 20px;
}

.popup .cycle a.prev { float:left;
}

.popup .cycle a.next { float:right;
}

/* Adjustments to account for mapbox.css box-sizing rules */
.leaflet-control-zoomslider-knob { width:14px; height:6px; }
.leaflet-container .leaflet-control-zoomslider-body {
  -webkit-box-sizing:content-box;
     -moz-box-sizing:content-box;
          box-sizing:content-box;
  }

<!--End CSS for Map -->

</style>
</head>

<body>

<div id='map'></div>
<div id="map-container">

<div id='map'></div>
</div>


<!-- API ACCESS FOR THE MAP -->
<script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibWFwcGxlZ2EiLCJhIjoiY2lqbzk3aGVlMDB0bHRvbTVvNXB1azZxdyJ9.PpTLv2su5er4AqXhF-LK4A';
var map = L.mapbox.map('map', 'mapbox.streets', {
  container: 'map',
});

var myLayer = L.mapbox.featureLayer().addTo(map);

var geoJson = [{
    type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [11.26098633, 43.76712702]},
    "properties": {
        'title': 'The Opinion of a Fashion Writer',
        'marker-color': '#0096FF',
        'marker-symbol': 'town',
        'marker-size': 'medium',
        'images': [
          ['https://drive.google.com/uc?id=1CCC0m-PSPVdKMI2r-4BTpcNfxi549Ppr','A new book by Giulia Baldini entitled, Fashion on The Beat, is more than a collection of interviews with famous designers; it is a statement to brown-skinned girls in Italy that they too can make it in the industry of fashion and fashion writing.'],
          ['https://drive.google.com/uc?id=1CCC0m-PSPVdKMI2r-4BTpcNfxi549Ppr','<iframe width="280" height="195" src="https://www.youtube.com/embed/OexRrVCw3lk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'],
          ['https://drive.google.com/uc?id=1Xn5AtfsLIFhS5aYOl4LicRnn5mJEqYiE','Primarily based in New York, Giulia Baldini, a graduating Senior at Hofstra University, is an Italian-Brazilian student who is trying to make a difference in not only her community, but her entire country.'],
          ['https://drive.google.com/uc?id=1QY7iRmgdZKMjSGZS6EiVr4jmNRX7Ledk','This is the illustrious town of Florence, also known as Firenze, where her roots are based. Her experiences as a brown-skinned Italian-Brazilian have shaped her and fuels the content found in her writing.']
        ]
    }
}, {
    type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [11.72606, 45.69236]},
    "properties": {
        'title': 'A Business Perspective',
        'marker-color': '#0096FF',
        'marker-symbol': 'industrial',
        'marker-size': 'medium',
        'images': [
          ['https://drive.google.com/uc?id=1H9ksXq4hMr-0lLZGUBvSaEoEXKHkG44h','Nerys, Stephan, and Justyn sat down to interview Erica Anesi, the COO of pba S.p.A. located in Tezze sul Brenta, Vicenza. This is an Italian corporation focused on art-deco and industrial materials.'],
          ['https://drive.google.com/uc?id=1H9ksXq4hMr-0lLZGUBvSaEoEXKHkG44h','<iframe width="280" height="195" src="https://www.youtube.com/embed/ZqCVYTI42Og"  frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'],
          ['https://drive.google.com/uc?id=1qS8sgPaeYDc2BlMcDrrdlRICbJXhDEZW','In light of the coronavirus, pba S.p.A. has begun manufacturing and distributing anti-microbial materials and surfaces such as doorhandles and countertops.'],
          ['https://drive.google.com/uc?id=1_xZUQ_3w9cL8LnWkvd3jsR7mgf_Fyb-6','On the opposite side of the world, is the pba U.S.A. headquarters located in Brooklyn, New York. As a primary branch of operation for the company, it is here that Erica is also the acting CEO of this medium-sized business, tending to both international branches in the middle of this pandemic.']
        ]
    }
}, {
    type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [12.4589, 41.9042]},
    "properties": {
        'title': 'The Perspective of a Photographer',
        'marker-color': '#0096FF',
        'marker-symbol': 'cinema',
        'marker-size': 'medium',
        'images': [
          ['https://drive.google.com/uc?id=1mCv-P1wxgiMcunlCWsinG97KwK_UMACP','Having followed up with recent R.U.F.A. graduate Flavia Daniele over Zoom, Stephan, Justyn, and Nerys were able to grab her perspective on art, creativity, and photography amidst the coronavirus restrictions in Roma, IT.'],
          ['https://drive.google.com/uc?id=1mCv-P1wxgiMcunlCWsinG97KwK_UMACP','<iframe width="280" height="195" src="https://www.youtube.com/embed/fzCCDAYnw24" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'],
          ['https://drive.google.com/uc?id=1DNiVDhQ4i2xt3eSbP2eXe1axJKhlCVaB','In an interview conducted in Italian by Nerys, Flavia spoke greatly on her experiences trying to continue her photography, despite the restrictions put in place by the Italian government. Above, is one of her works from a few years ago.'],
          ['https://drive.google.com/uc?id=1vjt5ri-cU5kYRzQoACOA_Pl_vfbI8pEM','While unfortunately, her plans to travel have been halted as a result of the coronavirus, Flavia has been spending her time in her own makeshift darkroom, creating black and white prints as pictured above.']
        ]
    }
}];

// Add custom popup html to each marker.
myLayer.on('layeradd', function(e) {
    var marker = e.layer;
    var feature = marker.feature;
    var images = feature.properties.images
    var slideshowContent = '';

    for(var i = 0; i < images.length; i++) {
        var img = images[i];

        slideshowContent += '<div class="image' + (i === 0 ? ' active' : '') + '">' +
                              '<img src="' + img[0] + '" />' +
                              '<div class="caption">' + img[1] + '</div>' +
                            '</div>';
    }

    // Create custom popup content
    var popupContent =  '<div id="' + feature.properties.id + '" class="popup">' +
                            '<h2>' + feature.properties.title + '</h2>' +
                            '<div class="slideshow">' +
                                slideshowContent +
                            '</div>' +
                            '<div class="cycle">' +
                                '<a href="#" class="prev">&laquo; Previous</a>' +
                                '<a href="#" class="next">Next &raquo;</a>' +
                            '</div>'
                        '</div>';

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent,{
        closeButton: false,
        minWidth: 320
    });
});

// Add features to the map
myLayer.setGeoJSON(geoJson);

$('#map').on('click', '.popup .cycle a', function() {
    var $slideshow = $('.slideshow'),
        $newSlide;

    if ($(this).hasClass('prev')) {
        $newSlide = $slideshow.find('.active').prev();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').last();
        }
    } else {
        $newSlide = $slideshow.find('.active').next();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').first();
        }
    }

    $slideshow.find('.active').removeClass('active').hide();
    $newSlide.addClass('active').show();
    return false;
});

<!-- SET THE MAP VIEW HERE -->
map.setView([43.5, 8.0], 6);
</script>


</body>
</html>
